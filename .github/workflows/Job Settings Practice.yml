name: Job Settings Practice # ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å

on:
  push:
    branches:
      - main

jobs:
  install:
    name: Install dependencies
    runs-on: ubuntu-latest
    steps:
      - name: ãƒªãƒã‚¸ãƒˆãƒªã‚’ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆ
        uses: actions/checkout@v4
      - name: ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
        run: npm install

  lint:
    name: Lint code
    runs-on: ubuntu-latest
    needs: install # install ã‚¸ãƒ§ãƒ–ãŒå®Œäº†ã—ã¦ã‹ã‚‰å®Ÿè¡Œ
    steps:
      - name: ãƒªãƒã‚¸ãƒˆãƒªã‚’ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆ
        uses: actions/checkout@v4
      - name: Linter ã‚’å®Ÿè¡Œ
        run: npm run lint

  build:
    name: Build application
    runs-on: ubuntu-latest
    needs: [install, lint] # install ã¨ lint ã®ä¸¡æ–¹ãŒæˆåŠŸã™ã‚‹ã¨å®Ÿè¡Œ
    steps:
      - name: ãƒªãƒã‚¸ãƒˆãƒªã‚’ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆ
        uses: actions/checkout@v4
      - name: ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ãƒ“ãƒ«ãƒ‰
        run: npm run build

  test:
    name: Run tests
    runs-on: ubuntu-latest
    needs: build # build ãŒå®Œäº†ã—ã¦ã‹ã‚‰å®Ÿè¡Œ
    continue-on-error: false # false ã®å ´åˆã€å¤±æ•—ã™ã‚‹ã¨ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å…¨ä½“ãŒåœæ­¢
    steps:
      - name: ãƒªãƒã‚¸ãƒˆãƒªã‚’ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆ
        uses: actions/checkout@v4
      - name: ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ
        run: npm test

  deploy:
    name: Deploy
    runs-on: ubuntu-latest
    needs: [build, test] # build ã¨ test ã®ä¸¡æ–¹ãŒå®Œäº†å¾Œã«å®Ÿè¡Œ
    if: ${{ success() }} # ã™ã¹ã¦æˆåŠŸã—ãŸå ´åˆã®ã¿ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹
    steps:
      - name: ãƒªãƒã‚¸ãƒˆãƒªã‚’ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆ
        uses: actions/checkout@v4
      - name: ãƒ‡ãƒ—ãƒ­ã‚¤å‡¦ç†ï¼ˆãƒ€ãƒŸãƒ¼ï¼‰
        run: echo "ğŸš€ Deploying application..."
